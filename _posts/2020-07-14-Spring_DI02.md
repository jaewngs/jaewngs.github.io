---



title:  "Spring DI(Dependency Injection)02"



layout: post



---


## [오늘 할 내용]
1. com.test01 : Spring beans 설정 연습
2. com.test01.Anno : Spring Annotation 설정
3. com.test02 : @Autowired를 setter, construct로 지정
4. com.test03 : annotation @Component @Lazy
5. com.test04
	- @Resource : 의존하는 빈 객체를 전달할 때 사용함
		- ex) @Component("userService")
			- <bean id = "userService" class "UserService" />
		- @Resource(name = "myuser") ..........	private MyUser mytest 랑
		- MyUser myuser  = new MyUser(); ..........  mytest = myuser; 랑 같음
		- Stereotype-annotation
			- @Component : 자동인식이 되는 일반 컴포넌트 <bean/>
			- @Service : 비즈니스 서비스 (BIZ)
			- @Repository : DAO (DBException 자동처리)
			- @Controller : MVC 컴포넌트
6. com.test05 : 특정 bean을 호출할 때 사용하는 어노테이션
	- @Inject
		- 참고하고자 하는 bean을 직접 injection하지 않고 클래스 타입에 Object<T> 대한 injection을 한다.
		- 객체 값을 리턴하는 get()메소드에서 사용된다.(JSR330)
		- ex)
			~~~ java
            Mydate<address> m = {address(0), ,,, }
			m.get(0);
            m.get(); // 전체 리턴하는 구조를 가진 메소드
			~~~

            ~~~ java
            class Test{
            	@Inject
            	private Mydate<address> mydate;

                public void setMydate(Mydate<address>  d){
                this.mydate = d;
                }
                public address getMydate(){
                return mydate<address>.get() ;
                }
            }
            ~~~
		- DefaultListableBeanFactory의 DependencyProvider라는 클래스의 구현체만 사용할 수 있다.

***

## com.test01

- Nic_name.java

    ~~~ java
    package com.test01;

    public class Nic_name {
        @Override
        public String toString() {
            return "Nic_name [toString() = 별명은 멍멍이";
        }
    }
    ~~~

- Nic_namePrn.java

    ~~~ java
    package com.test01;

    public class Nic_namePrn {
        private Nic_name nic_name;

        public void setNic_name(Nic_name nic_name) {
            this.nic_name = nic_name;
        }

        @Override
        public String toString() {
            return "Nic_namePrn [nic_name=" + nic_name + "]";
        }
    }
    ~~~

- beans.xml

    ~~~ xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

        <bean id="mynamePrn" class="com.test01.Nic_namePrn">
            <property name="nic_name" ref="myname" />
        </bean>

        <bean id="myname" class="com.test01.Nic_name" />
    </beans>
    ~~~

- MTest.java

    ~~~ java
    package com.test01;

    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    public class MTest {
        public static void main(String[] args) {
            ApplicationContext context 
            = new ClassPathXmlApplicationContext(new String[] { "com/test01/beans.xml" });

            Nic_namePrn prn = (Nic_namePrn) context.getBean("mynamePrn");

            System.out.println(prn);
        }
    }
    ~~~

	![image](https://user-images.githubusercontent.com/52989294/87417202-cbd61900-c60a-11ea-85b8-e0432c351521.png)

***

## com.test01.Anno

- Nic_name.java

    ~~~ java
    package com.test01.Anno;

    import org.springframework.stereotype.Component;

    @Component
    public class Nic_name {
        @Override
        public String toString() {
            return "Nic_name [toString() = 별명은 멍멍이";
        }
    }
    ~~~

- Nic_namePrn.java

    ~~~ java
    package com.test01.Anno;

    import org.springframework.stereotype.Component;

    @Component
    public class Nic_name {
        @Override
        public String toString() {
            return "Nic_name [toString() = 별명은 멍멍이";
        }
    }
    ~~~

- beans.xml

    ~~~ xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd">

        <context:component-scan
            base-package="com.test01.Anno" />
    </beans>
    ~~~

- MTest.java

    ~~~ java
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd">

        <context:component-scan
            base-package="com.test01.Anno" />
    </beans>
    ~~~

	![image](https://user-images.githubusercontent.com/52989294/87417129-b2cd6800-c60a-11ea-99c4-2e1cb64db1ff.png)

***

## com.test02
- Student.java

    ~~~ java
    package com.test02;

    import org.springframework.stereotype.Component;

    @Component
    public class Student {
        private String name;
        private String address;
        private int age;

        public void setName(String name) {
            this.name = name;
        }

        public void setAddress(String address) {
            this.address = address;
        }

        public void setAge(int age) {
            this.age = age;
        }

        @Override
        public String toString() {
            return "Student [name=" + name + ", address=" + address + ", age=" + age + "]";
        }
    }
    ~~~

- School.java

    ~~~ java
    package com.test02;

    import org.springframework.beans.factory.annotation.Autowired;
    import org.springframework.stereotype.Component;

    @Component("my_school")
    public class School {
        @Autowired
        private Student person;
        private int grade;

        public void setGrade(int grade) {
            this.grade = grade;
        }


        @Override
        public String toString() {
            return "School [person=" + person + ", grade=" + grade + "]";
        }
    }
    ~~~

- beans.xml

    ~~~ xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd">

        <context:annotation-config/>

        <bean class="com.test02.Student" id="mystudent">
            <property value="길동" name="name" />
            <property value="address 서울" name="address" />
            <property value="29" name="age" />
        </bean>

        <bean class="com.test02.School" id="my_school">
            <property value="1" name="grade" />
        </bean>
    </beans>
    ~~~

- MTest.java

    ~~~ java
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd">

        <context:annotation-config/>

        <bean class="com.test02.Student" id="mystudent">
            <property value="길동" name="name" />
            <property value="address 서울" name="address" />
            <property value="29" name="age" />
        </bean>

        <bean class="com.test02.School" id="my_school">
            <property value="1" name="grade" />
        </bean>
    </beans>
    ~~~

	![image](https://user-images.githubusercontent.com/52989294/87417400-135ca500-c60b-11ea-8332-c2cfd46df6f7.png)

***

## com.test03

- TV.java

    ~~~ java
    package com.test03;

    public interface TV {
        public void powerOn();
        public void powerOff();
        public void volumnDown();
        public void volumnUp();
    }
    ~~~

- LgTv.java

    ~~~ java
    package com.test03;

    import org.springframework.stereotype.Component;

    @Component("mylg")
    public class LgTV implements TV{

        public LgTV() {
            super();
            System.out.println("엘지 TV 생성자");
        }

        @Override
        public void powerOn() {
            System.out.println("LgTV --- 전원 켠다.");
        }

        @Override
        public void powerOff() {
            System.out.println("LgTV --- 전원 끈다.");
        }

        @Override
        public void volumnDown() {
            System.out.println("LgTV --- 소리 낮춘다.");
        }

        @Override
        public void volumnUp() {
            System.out.println("LgTV --- 소리 높인다.");
        }
    }
    ~~~

- SamsungTV.java

    ~~~ java
    package com.test03;

    import org.springframework.context.annotation.Lazy;
    import org.springframework.stereotype.Component;

    @Lazy
    @Component("mysamsung")
    public class SamsungTV implements TV {

        public SamsungTV() {
            super();
            System.out.println("삼성 TV 생성자");
        }

        @Override
        public void powerOn() {
            System.out.println("SamsungTV --- 전원 켠다.");
        }

        @Override
        public void powerOff() {
            System.out.println("SamsungTV --- 전원 끈다.");
        }

        @Override
        public void volumnDown() {
            System.out.println("SamsungTV --- 소리 낮춘다.");
        }

        @Override
        public void volumnUp() {
            System.out.println("SamsungTV --- 소리 높인다.");
        }
    }
    ~~~

- beans.xml

    ~~~ xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd">

        <context:component-scan
            base-package="com.test03" />
    </beans>
    ~~~

- MTest.java

    ~~~ java
    package com.test03;

    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    public class MTest {
        public static void main(String[] args) {
            // 실제로 실행되는 클래스의 타입을 실행시켜 준다.
            ApplicationContext factory = new ClassPathXmlApplicationContext("com/test03/beans.xml");
            TV tv = (TV) factory.getBean("mysamsung");
            tv.powerOn();
            tv.volumnUp();
            tv.volumnDown();
            tv.powerOff();
        }
    }
    ~~~

***

## com.test04

- UserService.java

    ~~~ java
    package com.test04;

    public interface UserService {
        public void addUser();
    }
    ~~~

- UserServiceImpl.java

    ~~~ java
    package com.test04;

    import javax.annotation.Resource;
    import org.springframework.stereotype.Component;

    @Component("userService")
    public class UserServiceImpl implements UserService {

        @Resource(name = "myuser")
        UserVo member; // UserVo member = new UserVo()와 같다.
                        // member = myuser;

        @Override
        public void addUser() {
            System.out.println("추가된 멤버 : " + member.getUserName());
        }
    }
    ~~~

- UserVo.java

    ~~~ java
    package com.test04;

    import org.springframework.stereotype.Service;

    @Service
    public class UserVo {
        private String userName;

        public UserVo() {
        }

        public UserVo(String userName) {
            this.userName = userName;
        }

        public String getUserName() {
            return userName;
        }
    }
    ~~~

- applicationContext.xml

    ~~~ xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd">

        <context:component-scan
            base-package="com.test04" />
        <bean id="myuser" class="com.test04.UserVo">
            <constructor-arg value="홍길동" />
        </bean>
    </beans>
    ~~~

- MTest.java

    ~~~ java
    package com.test04;

    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    public class MTest {
        public static void main(String[] args) {
            ApplicationContext factory = new ClassPathXmlApplicationContext("com/test04/applicationContext.xml");
            UserService u1 = factory.getBean("userService", UserService.class);
            u1.addUser();
        }
    }
    ~~~

***






