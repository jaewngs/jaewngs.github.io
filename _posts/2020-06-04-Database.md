---

title:  "Database"

layout: post

---

# DAY 36

## [오늘 할 내용]

1. 데이터베이스
2. 데이터베이스 시스템
3. 데이터 모델링

***

## 데이터베이스
### [E-R 데이터 모델]
- 실세계 인식에 기초한 것으로, 실세계 객체를 나타내는 개체(entity)들과 개체들 간의 관계(relationship)로 구성
	- 개체 : 실세계의 정보 대상
	- 관계 : 여러 개체들 간의 연관성
	- 속성 : 개체의 특성이나 상태 기술
	- 영역(도메인) : 속성이 가질 수 있는 값의 범위
	
### [데이터베이스 사용의 장점]
- 백업과 회복 기능
- 표준화된 데이터 관리
- 응용 프로그램의 개발 시간 단축
- 데이터 구조 변경에 융통성 부여
- 항상 최신의 정보를 제공
- 규모의 경제성

### [데이터베이스 사용의 단점]
- 운영비 오버헤드
- 복잡한 자료처리 방법
- 백업 및 회복의 오버헤드

### [데이터베이스를 사용하지 않아도 좋은 경우]
- 단일 사용자만 접근하는 경우
- 응용이 단순하고 변경이 잘 일어나지 않는 경우
- DBMS 오버헤드로 인하여 엄격한 실시간 데이터 처리 요구사항을 만족시키기 힘든 경우

***

## 데이터베이스 시스템
### [구조]
- 추상화와 데이터 독립성 확보
- 외부 단계 (= VIEW LEVEL)
	- 개인 사용자 관점, 외부 스키마
- 개념 단계 (= LOGICAL LEVEL)
	- 데이터베이스의 전체적 구조 기술, 개념 스키마
- 내부 단계 (= PHYSICAL LEVEL)
	- 저장 구조 기술

### [스키마의 3단계 구조]
- 3단계 스키마 아키텍처의 목적
	- 사용자의 응용과 물리적 데이터베이스의 분리

- 사용자 접속
	- Host Language : 계산, 논리 등의 주 처리 기능 제공
	- 데이터 종속 언어 : 데이터 정의(DDL)나 조작(DML) 처리 지원
	- 현장 사용자 : 질의어나 폼, 메뉴에 의한 인터페이스

- 사상
	- 외부 스키마로부터 저장된 데이터베이스까지 각 단계별 접근

### [DBMS의 프로그램 처리 절차]
1. 사용자에 의한 액세스 **요구**
2. DBMS는 요구를 받아 **분석**
3. DBMS는 외부, 개념, 내부 스키마 **접속**
4. DBMS는 저장 DB의 필수적 연산 **수행**

### [데이터베이스 관리 시스템]
- 입출력 처리기
: 사용자와 직접 연관된 처리

- 파서(Parsing 단계)
: 처리 요구된 명령어에 대한 구문 분석

- 선행 컴파일러
: 응용 프로그램에서 데이터 조작어 명령들을 추출

- 권한제어(Authorization Control)
: 사용자의 권한 검사

- 무결성 검사기
: 데이터베이스의 정확성 및 일관성 검사

- 갱신처리기
: 갱신의 중간 형태 저장

- 질의 처리기
: 대화식으로 입력된 고수준 질의들을 처리

- 최적화기
: SQL 문장을 구현하기 위한 효율적인 액세스 전략 선정

- 실행 코드 생성
: 실행 할 수 있는 프로그램에 대한 기계어 생성

- 트랜잭션 관리기
: 복수 사용자 환경에서 동시성 문제 해결

- 회복 관리기
: 시스템 장애에 관계없이 일관된 상태 유지

- 데이터 관리기
: 장치 및 저장관리기
: 하드웨어 자원관리 및 DB의 물리적 액세스

- 사전 관리기
: DB의 구조 정보 및 스키마에 대한 정의

![image](https://user-images.githubusercontent.com/52989294/83730995-c937e980-a684-11ea-86b4-096c9773ba23.png)


***

### DBMS의 프로그램 처리절차
![image](https://user-images.githubusercontent.com/52989294/83731089-e4a2f480-a684-11ea-8f60-dc8cd5019df1.png)

### [데이터베이스 관리자]
- 설계 임무
	- DB의 설계와 사용 규칙 결정
	- 데이터 사전, 보안절차 마련, 무결성 유지, 소프트웨어 결정

- 관리 임무
	- 데이터 표현 방법과 문서화 기준 결정

- 운용 임무
	- 물리적 저장구조 및 저장 매체 선정
	- 액세스 통제 방법 결정, 보안절차 마련, 무결성 유지

- 성능 측정
	- 시스템의 전체적인 효율성 검사

### [기억장소 정의어(SDL)의 기능]
- 기억장치 선택
- 논리적 데이터를 물리적 데이터로 사상
- 색인 구성
- 데이터 물리적 순서 규정
- 물리적 데이터의 표현 규정
- 저장장소의 지정

### [데이터 조작어(DML)]
- 조작 기능의 조건
	- 사용하기 쉽고, 자연어에 가까워야 함
	- 정확하고 완전해야 함
	- 데이터 언어의 효율적 구현을 지원해야 함

- 제어명령
	- 데이터베이스를 액세스하고 데이터 자원을 이용 할 수 있는 명령

- 검색명령
	- 데이터를 선정하고 선정된 데이터에 대한 연산을 수행

- 수정명령
	- 삽입, 삭제, 갱신의 연산을 수행


### [DBMS를 위한 시스템 구조]

웹 응용을 위한 3-Tier DBMS 구조
1. GUI, 웹 인터페이스 : 클라이언트
2. 응용 프로그램, 웹 페이지 : 응용 서버 또는 웹 서버
3. 데이터베이스 관리 시스템(DBMS) : 데이터베이스 서버

***

## 데이터 모델링
### [데이터베이스 설계 단계]
![image](https://user-images.githubusercontent.com/52989294/83730877-a86f9400-a684-11ea-831c-bfff5b04407c.png)


### [데이터베이스 설계과정]
1. 사용자 요구분석
	: 개발 업무 대상 및 사용자 요구 분석
    
2. 개념적 데이터베이스 설계
	: DB에 저장해야 할 데이터를 모형으로 표현
    : E-R 모델(관계형 지원), 객체지향 모델(객체지향 DB지원)

3. 논리적 데이터베이스 설계
	: 특정 DBMS를 사용하기 위한 논리적 구조의 스키마 설계

4. 물리적 데이터베이스 설계
	: 데이터베이스 스키마를 실제 구축
    
### [데이터 모델링의 개념]
- 정보 시스템 구축을 위한 데이터와 필요한 정보 분석 방법
- 모델링 범주
	- 데이터 관점(WHAT, DATA)
	- 프로세스 관점(HOW, PROCESS)
	- 데이터와 프로세스의 상관 관점(INTERACTION)
	
- 데이터 모델링 진행 시 중요사항
	- 업무에 관여하는 어떤 것(THING)
	- 업무가 관여하는 어떤 것 간의 관계(RELATIONSHIP)
	- 어떤 것의 성격(ATTRIBUTE)
	- ex) "학생들이 다음 학기 과목인 데이터베이스를 수강신청 할 경우, 학생 중 이름은 홍길동, 학번은 100번, 학년은 3학년, 이수구분은 전공필수 과목이다"

- 프로세스 모델링
	- 업무 처리에 필요한 프로세스 분석
	- 트리 자료 구조로 각 프로세스 분해

- 상관 모델링
	- 데이터, 프로세스 분석
	- E-R 개체 타입과 단위 프로세스 이용
	- 데이터 모델과 프로세스 모델의 품질 향상
	- 검증 대상
		- 데이터 모델 : 개체 타입, 속성 관계
		- 프로세스 모델 : 각 업무 기능과 단위 프로세스

### [모델링 도구]
- Entity (개체)
	- 현실세계의 유무형의 사물
		- 데이터베이스의 모델링이 대상이 된다면 개체로 정의
	- 이런 엔티티를 ERD로 나타낼 때는 사각형으로 나타내고 이름을 붙임
	
- Attribute (속성)
	- 각 엔티티가 가질 수 있는 속성
	- 예를 들어 고객 엔티티는 고객번호, 고객명, 주소 등의 속성을 가질 수 있는데 이런 속성들을 attribute라 하며 attribute 중의 어떤 엔티티의 값은 엔티티를 유일하게 구분
	- 고객 엔티티에서 고객번호는 특정 고객을 유일하게 구분
	- 속성의 구분
		- 단순 속성과 복합 속성(ex.주민번호)
		- 단일 값 속성과 다중 값 속성
		- 유도된 속성 대 저장된 속성
	- NULL 속성
		- 개체가 속성에 값을 갖지 않을 때 사용
	- 개체 집합
		- 같은 속성을 가진 개체들의 집합
	- 키 속성
		- 개체를 구성하는 여러 속성 중 키 값을 나타내는 속성
	- 값 집합
		- 개체 타입의 각 속성이 가질 수 있는 값의 범위

- Relation (관계)
	- 여러 엔티티간의 연관성을 의미
	- 관계를 나타내기 위해서 두 엔티티들을 연결하는 실선들이 있고 그 사이에 마름모 모양의 표시
	- 사상 원소수(mapping cardinality)
		- 개체 집합 X와 Y가 어떤 관계를 맺고 있다 할 때
		- 분류
			- 일대일(1:1)
				- 한 명의 고객에게 한 번의 대출만 가능하다면 일대일 관계
			- 일대다(1:N)
				- 한 명의 고객이 여러 번의 대출을 받았다면 일대다 관계
			- 다대일(N:1)
				- 하나의 대출 상품에 대해 여러 명의 고객이 대출 받았다면 다대일 관계
			- 다대다(M:N)
				- 한 고객이 여러번 대출을 받고 하나의 대출 계좌에 대해 여러 고객이 대출 받았다면 다대다 관계


### [E-R 다이어그램에서 사용되는 기호]
![image](https://user-images.githubusercontent.com/52989294/83712023-c2e34680-a65f-11ea-930f-9a55995f9bde.png)

***
![image](https://user-images.githubusercontent.com/52989294/83712108-ec03d700-a65f-11ea-9183-00098ad756a7.png)

***

### [지배개채와 종속개체]
- 엔티티 Y가 있어야만 엔티티 X가 존재핥 때는 X는 Y에 존재 종속되었다고 한다.
- Y는 지배 엔티티(대부)
- X는 종속 엔티티(지불)
- 대부 엔티티가 삭제되면, 그에 연관된 모든 지불 엔티티 또한 삭제되어야 한다.

### [약 개체 집합]
- 주 키를 갖지 않는 엔티티 집합
- 강 엔티티 집합이 있어야만 약 엔티티 집합이 존재
- **약 엔티티 집합은 일대다 관계 집합을 통해 강엔티티 집합에 연결해야한다.**
- 약 엔티티 집합의 구별자(또는 부분 키)는 약 엔티티 집합 내의 엔티티들을 구분하는 애트리뷰트의 집합이다.
- 약 엔티티 집합의 주 키는 약 엔티티 집합이 존재 종속 관계에 있는 강 엔티티 집합의 주 키와 약 엔티티 집합의 구별자가 합쳐져 이루어진다.
- 약 엔티티 집합은 이중 사각형으로 나타낸다.
- 약 엔티티 집합의 구별자에는 점선으로 밑줄을 긋는다.
- 지급번호 - 지불 엔티티 집합의 구별자
- 지불의 주 키 - (대부번호, 지급번호)

![image](https://user-images.githubusercontent.com/52989294/83731444-80ccfb80-a685-11ea-9c88-865d0370fa7f.png)


### [세분화(Specialization)]
- 하향식 설계 절차 : 집합 내의 서로 다른 엔티티와 구분되는 엔티티 집합 내의 서브 그룹핑으로 지정
- **이들 서브 그룹핑은 상위 단계 엔티티 집합에는 적용되지 않는 애트리뷰트를 가지거나 관계에 참여하는 하위단계 엔티티 집합이 된다.**
- ISA라는 레벨을 가진 역삼각형으로 나타낸다.(즉, 정기예금 "is an" 계좌)

**예)**
![image](https://user-images.githubusercontent.com/52989294/83731852-27190100-a686-11ea-837b-1a31ad16a053.png)


### [일반화(Generalization)]
- 상향식 설계 절차 : 동일한 기능을 공유하는 여러 엔티티 집합을 상위 단계 엔티티 집합으로 결합
- 세분화와 일반화는 서로가 단순한 역관계이다. E-R도에서는 같은 방법으로 표현
- 애트리뷰트 상속 - 하위 단계 엔티티 집합은 연결된 상위 단계 엔티티 집합의 모든 애트리뷰트와 관계 참여를 상속

![image](https://user-images.githubusercontent.com/52989294/83721159-7b67b500-a675-11ea-835e-f9474564cae2.png)

### [순환적 관계의 구조(Recursive)]
![image](https://user-images.githubusercontent.com/52989294/83731287-38154280-a685-11ea-9f67-4fb707b0c436.png)

## 논리적 데이터 모델링
- ER 개념적 구조를 관계 데이터 모델(RDB)로 변환
	- 단계1 : 개체 타입
	- 단계2 : 약한 개체 타입
	- 단계3 : 1:1 관계
	- 단계4 : 1:N 관계
	- 단계5 : N:M 관계
	- 단계6 : 다중값 속성
	- 단계7 : N차 관계 

### [테이터베이스 설계 과정 예]
- 데이터 모델링
	- ER 모델은 엔티티라는 기본 객체와 이들 객체 간의 관계 집합으로 구성된 실세계의 인식에 기반
	- 데이터베이스의 전체 논리 구조를 나타내는 조직의 스키마를 명시함으로써 데이터베이스 설계를 쉽게 하도록 개발
	- ER 모델은 실 세계 조직의 의미와 상호 작용을 개념을 스키마로 대응시키는데 특히 유용하며, 많은 데이터베이스 설계 도구들이 ER모델의 개념에 기반을 두고 있음

### E-R 모델의 예(회사 시스템)
![image](https://user-images.githubusercontent.com/52989294/83731517-a0fcba80-a685-11ea-8766-4e0548d8e5a7.png)

### 관계 데이터 모델로 변환
![image](https://user-images.githubusercontent.com/52989294/83731596-c38ed380-a685-11ea-8c44-b21d32f4f08c.png)







