---



title:  "Spring DI(Dependency Injection)01"



layout: post



---


## [오늘 할 내용]
1. 이클립스에 Spring 환경 구축하기
2. Spring이란?
3. SpringDI
	- sample01 : DI 개념. is-a 관계를 이용한 구도 학습
	- sample02 : has-a 관계를 이용하여 DI를 이용할 수 있음
	- sample03 : setter, constructor injection의 이해도를 구현한다.
	- sample04 : 추상클래스의 패턴과 싱글톤 패턴을 이해하고 구현한다.
		- 싱글톤 패턴(Singleton Pattern)
			- static 메소드와 private 생성자를 만들어서 단 하나의 인스턴스만 연동할 수 있도록 구현하는 패턴(java에서 카렌다 클래스, 그래픽 클래스 등이 이에 속함)
			~~~ java
            class Test{
            	private Test(){}
                public static Test getInc(){return new Test();}
            }
            ~~~
            - Test t1 = Test.getInc();  ... 싱글톤
        - 싱글톤 레지스토리
        	- 스프링에서 직접 싱글톤 형태의 오브젝트를 만들고 관리하는 기능을 제공하는 것을 말함
        	- 스프링 빈 오브젝트는 내부적으로 싱글톤 레지스트리를 만들어서 연동함
	- sample05 : setter injection 으로 의존성 주입
	- sample06 : 다형성을 이용하여 생성자로 is ~ a 관계의 객체 값을 이용하여 의존성 주입
	- sample07 : xml 설정 파일 import하여 나열하고 호출한 결과를 확인
	- sample08,09 : 상속관계가 아닌 단일 클래스 값을 이용하여 의존성 주입
	- sample10 : 다형성 객체를 선언하고 자바코드로 빈 팩토리를 생성해서 각각의 동적 바인딩을 구현
	- sample11 : lazy-init, depends-on = "참조되는 객체의 id"(sample02/applicationContext2.xml 참고)
		- lazy-init
            - 빈 팩토리를 이용해서 스프링에서 설정을 하고 난 후 객체를 id로 getBean()로 호출을 하게 되면 메모리에 올려진 객체들이 선언된 순서대로 생성된 것을 확인 할 수 있다.
            - 기본적으로 스프링 컨테이너가 시작할 때 싱글톤에 의해 bean에 대해 모든 인스턴스화 된다.
            - 만일 특정 싱글톤 유형에 대한 bean을 컨테이너가 시작할 때 인스턴스화 시키지 않고 해당 bean을 사용하고자 하는 시점에 인스턴스화 하고 싶을 때 사용하는 속성 키워드가 lazy-init이다.

		- depends-on
			- bean이 초기화 되기 전에 먼저 초기화 되는 키워드
				- 특정 bean이 초기화 되기 전에 초기화 되어야 하는 bean을 명시적으로 선언
				- 생성자와 setter 메소드로 값을 전달하기 이전에 메모리에 생성되는 객체가 정의 되어 메모리 체크를 할 때 많이 사용되는 키워드
				- 미리 서버를 구동시켜 놓고 특정 리소스에 대한 작업을 체크할 때 사용됨
				- depends-on 파일 없을 시 NoSuchBeanDefinitionException 에러 발생
	- sample12 : java.util의 컬렉션[list, set, map ... ]값을 inject 할 수 있다.
	- sample13
		- abstract = "true"  --->>> 일반 클래스를 추상 클래스로 선언하는 기능
		- Merge = true --->>> collections 병합하는 키워드
	- sample14
		- message  -> MessageSource를 이용해서 속성값을 찾아온다.
		- 번들값, 속성값 등을 참조할 때 사용함
		- MessageSource : getMessage()
		- MessageSourceAware : setMessageSource(MessageSource)
		- 순서
            - 키, 값을 가진 파일을 생성 -> ResourceBundleMessageSource로 파일을 읽어온다.
            - MessageSourceAware를 상속받은 클래스는 setMessageSource()로 메시지를 관리한다.
            - MessageSource의 getMessage()로 키를 지정해서 값을 리턴 받는다.
		- testmessage_en.properties
		- testmessage_ko.properties
		- beans.xml
		- MemberInfo.java
		- MTest.java
	- sample15 : autowire 속성
		- byName
			- id -> favoriteFood --- setFavoriteFood 자동호출
			- 참조변수의 이름과 같은 해당 객체의 메소드가 있을 때, 자동 할당
		- byType
			- 참조변수의 Type과 같은 메소드의 param이 선언되어 있으면 자동할당
			- setFavoriteFood(Food f)
		- constructor
			- byType과 같은 내용을 생성자를 통해서 같은 type있으면 할당
		- autodetect
			- 생성자에 할당할 type이 있는지를 먼저 확인한 후, 없으면 메소드에서 type이 있는지 확인하여 할당
			- 실제 class에서 @autowired라는 옵션으로 많이 쓰이는 내용

	- sample16 : Spring + JDBC [datasource]	- javax.sql
		- spring2.5 / spring3.0[표준] / spring4.0[java ver8.0(6,7)]
		- Spring + DB
		- 방법1 : Spring + JDBC [java]
			- java.sql
		- 방법2 : Spring + JDBC [datasource]
			- javax.sql
		- 방법3 : SpringJDBC
			- Spring ver4.0부터 사용
			- org.springframework.jdbc.datasource.SimpleDriverDataSource
		- 방법4 : Spring + ORM(Object-Relational Mapping)
			- Hibernate, [ibatis(ver2.0, 3.0), mybatis(5.0)]
			- .xml로 쿼리를 작성한 파일을 객체로 맵핑하는 것
		- 방법5 : Spring(ver5.0) + JSR

	- sample17
		- Spring + JDBC [datasource]- javax.sql을 기준으로 DB를 세팅하는데 환경설정파일[beans]를 .java 파일로 연동하는 방법


***

## 스프링 환경세팅(이클립스)
- Help > Eclipse Marketplace... 로 들어가기
- 아래 그림처럼 sts검색 후 두개 설치하기

	![image](https://user-images.githubusercontent.com/52989294/87260855-d4393180-c4ee-11ea-98cd-439f721112d9.png)

***

## 스프링 프로젝트 생성하기
- java 프로젝트로 생성하기
- 프로젝트 우클릭(그림참조)

	![image](https://user-images.githubusercontent.com/52989294/87260766-5b39da00-c4ee-11ea-9aa7-c1fde2c2698b.png)

***

### pom.xml 수정하기
- <https://mvnrepository.com/search?q=spring> 에서 <**dependency**> 복사해서 붙이기

    ~~~ xml
    <project xmlns="http://maven.apache.org/POM/4.0.0"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
        <modelVersion>4.0.0</modelVersion>
        <groupId>SpringDI_0713</groupId>
        <artifactId>SpringDI_0713</artifactId>
        <version>0.0.1-SNAPSHOT</version>
        <build>
            <sourceDirectory>src</sourceDirectory>
            <plugins>
                <plugin>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>3.8.0</version>
                    <configuration>
                        <source>1.8</source>
                        <target>1.8</target>
                    </configuration>
                </plugin>
            </plugins>
        </build>
        <dependencies>
            <!-- https://mvnrepository.com/artifact/org.springframework/spring-context -->
            <dependency>
                <groupId>org.springframework</groupId>
                <artifactId>spring-context</artifactId>
                <version>4.3.27.RELEASE</version>
            </dependency>

            <!-- https://mvnrepository.com/artifact/org.springframework/spring-core -->
            <dependency>
                <groupId>org.springframework</groupId>
                <artifactId>spring-core</artifactId>
                <version>4.3.27.RELEASE</version>
            </dependency>

            <!-- https://mvnrepository.com/artifact/org.springframework/spring-beans -->
            <dependency>
                <groupId>org.springframework</groupId>
                <artifactId>spring-beans</artifactId>
                <version>4.3.27.RELEASE</version>
            </dependency>
        </dependencies>
    </project>
    ~~~

***

## Spring이란?
- 오픈 소스 프레임워크
	- 엔터프라이즈 어플리케이션 개발의 복잡성을 줄여주기 위한 목적
	- EJB 사용으로 수행되었던 모든 기능을 일반 POJO(Plain Old Java Object)를 사용해서 가능하게 함
		- 경량 컨테이너(light weight container)
- 주요 개념
	- 의존성 주입(lightweight dependency injection)
	- 관점 지향 컨테이너(aspect-oriented container)

***

### POJO란?
- Plain Old Java Object 약자
- Plain : component interface를 상속받지 않는 특징(특정 프레임워크에 종속되지 않는)
- Old : EJB 이전의 자바 클래스를 의미

***

### Spring 장점
- 경량 컨테이너 - 객체의 라이프 사이클 관리, J2EE 구현을 위한 다양한 API 제공
- DI(Dependency Injection) 지원
- AOP(Aspect Oriented Programming) 지원
- POJO(Plain Old Java Object) 지원
- JDBC를 위한 다양한 API 지원
- Transaction 처리를 위한 일괄된 방법 제공
- 다양한 API와의 연동 지원

***

### 스프링 프레임워크의 취지
- 기술 자체보다 좋은 설계가 중요함
- 인터페이스를 통한 느슨한 결합은 자바 빈의 훌륭한 모델임
	- 느슨한 결합이란?
		- 두 객체가 느슨하게 결합되어 있다는 것이란, 그 둘이 상호작용을 하긴 하지만, 서로에 대해 서로 잘 모른다는 뜻
		- 느슨하게 결합되는 디자인을 사용하면 변경사항이 생겨도 무난히 처리할 수 있는 유연한 객체지향 시스템을 구축 할 수 있다.
- 코드는 테스트하기 쉽고 편해야 함
- EJB의 복잡도에서 벗어나야 함

***

### 의존성 주입(Dependency Injection, DI)
- 의존 관계 주입(dependency injection)
	- 객체 간의 의존관계를 객체 자신이 아닌 외부의 조립기가 수행함
	- 제어의 역행(inversion of control, IoC)이라는 의미로 사용되었음
	- DI를 통해 시스템에 있는 각 객체를 조정하는 외부 개체가 객체들에게 생성시에 의존관계를 주어짐
		- 즉, 의존이 객체로 주입됨
		- 객체가 협업하는 객체의 참조를 어떻게 얻어낼 것인가라는 관점에서 책임성의 역행(inversion of responsibility)임
	- 느슨한 결합(loose coupling)이 주요 강점
		- 객체는 인터페이스에 의한 의존관계만을 알고 있으며, 이 의존관계는 구현 클래스에 대한 차이를 모르는채 서로 다른 구현으로 대체가 가능

***

### 스프링 프레임워크와 DI(Dependency Injection)
- 의존성이 높은 결합
	- 자신이 사용할 DAO 객체를 직접 new 라는 키워드를 사용하여 생성하여 사용할 경우 의존성이 높음
	- 프로젝트 스펙이 바뀌거나 다른 DAO를 참조해야 할 때 코드의 수정이 불가피함
	- ex)

    ~~~ java
    class UserServiceImpl{
        UserDaoJDBCImpl dao;
        public void register(User user){ }
        public User findUser(String name){
        dao = new UserDaoJDBCImpl ( );
        User r = dao.select(name);
        return r;
        }
    }
    ~~~

    ~~~ java
    class UserDaoJDBCImpl{
        public User select(String name){
            // 이름을 받아서 "select * from user where name = ?"
        }
    }
    ~~~

    ~~~ java
    User res = new UserServiceImpl().findUser("홍길동");
    ~~~

- 인터페이스를 사용함
	- 인터페이스를 사용하여 의존성은 조금 낮아졌으나 여전히 의존성이 높음

- Factory 패턴을 이용하여 의존성을 낮춤
	- DAO와 의존성은 낮아졌으나 Factory 클래스와의 의존성은 여전히 높음

- 조립기(Assembler)를 통해 의존성 주입
	- 객체 외부의 조립기가 각 객체의 의존관계를 설정해 줌
	- 이를 DI패턴이라 함

***

### 스프링 프레임워크의 DI 방법
- 특정 interface를 통한 의존성 설정
	- 거의 사용하지 X

- Setter를 통한 의존성 설정
	- 클래스
	- xml

- Constructor를 통한 의존성 설정

- IoC(Inversion of Control)란?
	- 제어 역행화는 말 그대로 제어가 일반적인 흐름을 따르지 않고, 반대로 흘러간다는 뜻으로 각각의 프로그램이 가지고 있던 구현 객체에 대한 정보가 이젠 프레임워크에서 관리되는 것임.
	- 현재는 DI라는 용어를 더 많이 사용함

- 의존성이란?
	- 보통 비즈니스 로직을 수행하기 위해 둘 이상의 클래스를 사용한다.
	- 전통적으로 각 객체는 협업할 객체의 참조를 취득해야 하는 책임이 있다.
	- 이것이 의존성이다. 객체 간의 결합도가 높으면 테스트하기 어려운 코드를 만들어 낸다.

***

### 스프링 프레임워크 컨테이너의 종류
- BeanFactory
	- org.springframework.beans.factory.BeanFactory
	- 기본적인 의존성 주입을 지원하는 가장 간단한 형태의 컨테이너
	- AOP를 지원하지 않음

- ApplicationContext
	- org.springframework.context.ApplicationContext
	- 프로퍼티 파일의 메시지 해석, 이벤트 발행들의 서비스 제공

- WebApplicationContext
	- org.springframework.web.context.WebApplicationContext
	- 웹 어플리케이션을 위한 ApplicationContext

- BeanFactory와 ApplicationContext의 차이
	- BeanFactory는 getBean( ) 메소드가 호출될 때까지 빈의 생성을 미룬다.
	- 즉, BeanFactory는 모든 빈을 LazyLoading 한다.
	- ApplicationContext는 시작할 때 모든 싱글턴 빈을 미리 로딩한다.
	- 따라서, 빈이 필요할 때 즉시 사용될 수 있도록 보장해준다.(여러 개의 객체를 만들 수 있게 설정 가능함)

- Lazy Loading이란?
	- 객체를 실제로 사용할 때 initialize와 loading하자는 것이다.
	- 그 객체를 실제로 사용할 때까지 최대한 initialize와 loading을 늦춰서 memory운용의 효율성을 꾀하는 방법임

***

### BeanFactory
- 가장 단순한 컨테이너
- 다양한 유형의 빈을 생성하고 분배하는 책임을 짐
- 클래스를 객체화 할 때 협업하는 객체 간의 연관관계를 생성함
- 스프링에서는 다양한 BeanFactory 구현 클래스가 있음
- 가장 유용한 것은 XmlBeanFactory로서 xml파일에 기술되어 있는 정의를 바탕으로 빈을 로딩함

	~~~ java
    BeanFactoy factory = new XmlBeanFactory(new FileSystemResource("beans.xml"));
    MyBean myBean = (MyBean)factory.getBean("myBean");
	~~~

- 스프링은 org.springframework.core.io.Resource 인터페이스를 사용해서 다양한 종류의 자원을 동일한 방식으로 표현할 수 있도록 하며, Resource를 이용하여 XmlBeanFactory에 설정 정보를 전달한다.

***

- Resource 구현 클래스
	- FileSystemResource(파일로부터)
	- InputStreamResource(스트림으로부터)
	- ClassPathResource(클래스 패스로부터)
	- UrlResource(url로부터)
	- ServletContextResource(ServletContext로부터)
	- PortletContextResource(포틀릿으로부터)

	- 포틀릿이란?
		- 포틀릿은 복합페이지의 컨텍스트 내에 결집되기 위해 특별히 고안된 웹컴포넌트이다.
		- 통상 많은 포틀릿들은 포탈페이지의 단일 요청(request)로 호출된다.
		- 각 포틀릿은 마크업 조각을 생성한다.
		- 그것은 다른 포틀릿의 마크업과 결합되어 전체 포탈페이지 마크업이 된다.

	-  포탈이란?
		- 포틀릿 스펙에 따르면 " 포탈은 개인화, 싱글사인온, 다른 소스와 호스트의 정보시스템 프레젠테이션층 정보를 집적하는 등의 기능을 공통적으로 제공하는 웹 어플리케이션이다. 집적(aggregation)은 웹페이지에서 다른소스로부터 콘텐츠를 통합하는 행위를 말한다." 라고 정의하고 있다.

***

### ApplicationContext
- BeanFactory보다 좀 더 진보된 컨테이너(BeanFactory 인터페이스를 확장함)
- 빈을 로딩하고, 빈들을 Wiring 하며, 요청에 따라 빈을 분배함
- 국제화 지원을 위해 텍스트 메시지를 해석함
- 이미지 등의 자원을 로딩하는 범용적인 방법을 제공함
- 리스너로 등록되어 있는 빈에게 이벤트를 발행할 수 있음

- ApplicationContext의 구현 클래스
	- ClassPathXmlApplicationContext
    	- 클래스 경로에 있는 xml파일로부터 context정의를 로딩하면, context정의를 클래스 경로에 있는 자원으로 취급함
	- FileSystemXmlApplicationContext
		- 파일 시스템에 있는 xml파일로부터 context정의를 로딩함
	- XmlWebApplicationContext
		- 웹 어플리케이션에 포함되어 있는 xml파일로부터 context 정의를 로딩함

***

### BeanFactory Life Cycle(순서)
- 인스턴스화
- 프로퍼티 채우기
- BeanNameAware의 setBeanName()
- BeanFactoryAware의 setBeanFactory()
- BeanPostProcessor의 전처리
- InitializingBean의 afterPropertiesSet( )
- 커스텀 init-method 호출
- BeanPostProcessor의 후처리
- 즉시 사용 가능한 상태의 빈
- 컨테이너 종료
- DisposableBean의 destroy( )
- 커스텀 destroy-method 호출

***

## src/sample01
- MessageBean.java

    ~~~ java
    package sample01;

    public interface MessageBean {
        public void sayHello();
    }
    ~~~

- MessageBeanImpl.java

    ~~~ java
    package sample01;

    public class MessageBeanImpl implements MessageBean {
        private String fruit;
        private int cost;

        public MessageBeanImpl() {
            super();
            this.fruit = "strawberry";
            this.cost = 5000;
        }
        public MessageBeanImpl(String fruit, int cost) {
            super();
            this.fruit = fruit;
            this.cost = cost;
        }
        @Override
        public void sayHello() {
            System.out.println(fruit + "\t" + cost);
        }
    }
    ~~~

- MTest.java

    ~~~ java
    package sample01;

    public class MTest {
        public static void main(String[] args) {
            // java 형식의 코드
            // 객체를 생성한 다음 생성된 객체의 주소로 메소드를 호출하는 방식
            // 1. 기본 생성자 객체 생성
            MessageBeanImpl mi = new MessageBeanImpl();
            mi.sayHello();

            // 2. 매개 인자 전달 생성자로 객체 생성
            MessageBeanImpl mi02 = new MessageBeanImpl("melon", 7000);
            mi02.sayHello();
        }
    }
    ~~~

***

- 스프링은 xml에 먼저 선언해줘야함
- 아래 사진 참조(MyBean.xml 생성)

	![image](https://user-images.githubusercontent.com/52989294/87262273-46f8db80-c4f4-11ea-911d-c335d51a305c.png)

- beans, context 선언

	![image](https://user-images.githubusercontent.com/52989294/87262330-8b847700-c4f4-11ea-8b5b-bdf6e34e2b5b.png)

***

- MyBean.xml

    ~~~ xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="http://www.springframework.org/schema/beans https://www.springframework.org/schema/beans/spring-beans-4.3.xsd
            http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context-4.3.xsd">

        <!-- 메인을 먼저 만들지 않아도 메모리에 먼저 올라감 -->
        <!-- 스프링은 빈즈를 메모리에 자동으로 올려줌 생성자가 private라도 상관없음 -->
        <bean id="mi" class="sample01.MessageBeanImpl"></bean>
        <bean id="mi02" class="sample01.MessageBeanImpl">
            <constructor-arg index="0" value="melon"></constructor-arg>
            <constructor-arg index="1" value="7000"></constructor-arg>
        </bean>
    </beans>
    ~~~

- MTest02.java

    ~~~ java
    package sample01;

    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    public class MTest02 {

        // spring 선언한 Bean을 호출한 다음 메소드 호출
        public static void main(String[] args) {

            // 1. 클래스를 작성
            // 2. MyBean.xml에 id로 bean을 등록
            // 3. ClassPathXmlApplicationContext로 2번을 찾아온다.

            ApplicationContext ac = new ClassPathXmlApplicationContext("sample01/MyBean.xml");

            // 방법1) MessageBean bean = (MessageBean) ac.getBean("mi");
            // 방법2) getBean(String name, Class<T> requiredType)
            MessageBean bean = ac.getBean("mi",MessageBeanImpl.class);
            bean.sayHello();

            bean = (MessageBean) ac.getBean("mi02");
            bean.sayHello();
        }
    }
    ~~~

	![image](https://user-images.githubusercontent.com/52989294/87290808-7120bc80-c539-11ea-8a6a-f7efabae7f41.png)

***

## src/sample02
- Address.java

    ~~~ java
        package sample02;

        public class Address {
            private String name;
            private String addr;
            private String tel;

            public Address(String name, String addr, String tel) {
                super();
                this.name = name;
                this.addr = addr;
                this.tel = tel;
            }

            public Address() {
                super();
            }

            /*
             * public String getName() { return name; }
             */

            public void setName(String name) {
                this.name = name;
            }

            /*
             * public String getAddr() { return addr; }
             */

            public void setAddr(String addr) {
                this.addr = addr;
            }

            /*
             * public String getTel() { return tel; }
             */

            public void setTel(String tel) {
                this.tel = tel;
            }

            @Override
            public String toString() {
                return "Address [name=" + name + ", addr=" + addr + ", tel=" + tel + "]";
            }
        }
    ~~~

- ListAddress.java

    ~~~ java
    package sample02;

    // has a 관계 [생성자, setter]로 값 전달 및 변경
    public class ListAddress {
        private Address addr;

        public ListAddress() {
            super();
            // addr = new Address("111", "111", "111"); 결합도 높다.
        }

        public ListAddress(Address addr) {
            super();
            this.addr = addr;
        }

        public Address getAddr() {
            return addr; // addr.toString();
        }

        public void setAddr(Address addr) {
            this.addr = addr;
        }
    }
    ~~~

- applicationContext.xml

    ~~~ xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

        <!-- 1. 단일 클래스인 Address의 객체를 선언 -->
        <bean id="myaddr01" class="sample02.Address" />

        <!-- 2. 단일 클래스인 Address의 생성자로 값 전달 -->
        <bean id="myaddr02" class="sample02.Address">
            <constructor-arg index="0" value="홍길동" type="String" />
            <constructor-arg index="1" value="서울" type="java.lang.String" />
            <constructor-arg index="2" value="02-000" />
        </bean>

        <!-- 3. 단일 클래스인 Address의 setter로 값 전달 -->
        <bean id="myaddr03" class="sample02.Address">
            <property name="name" value="최길동" />
            <property name="addr" value="서초구" />
            <property name="tel" value="02-777-7777" />
        </bean>

        <!-- 4. ListAddress의 기본 생성자로 객체를 선언 -->
        <bean id="mylist01" class="sample02.ListAddress" />

        <!-- 5. ListAddress의 매개인자 생성자로 객체를 선언 -->
        <bean id="mylist02" class="sample02.ListAddress">
            <constructor-arg ref="myaddr02"></constructor-arg>
        </bean>

        <!-- 6. ListAddress의 setter로 Address 값을 전달 후 선언 -->
        <bean id="mylist03" class="sample02.ListAddress">
            <property name="addr" ref="myaddr03"></property>
        </bean>

        <!-- 7. ListAddress의 생성자로 Address 값을 내부 선언 후 전달 -->
        <bean id="mylist04" class="sample02.ListAddress">
            <constructor-arg>
                <bean id="myaddr04" class="sample02.Address">
                    <property name="name" value="777" />
                    <property name="addr" value="777" />
                    <property name="tel" value="777" />
                </bean>
            </constructor-arg>
        </bean>
    </beans>
    ~~~

- MTest.java

    ~~~ java
    package sample02;

    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    public class MTest {
        public static void main(String[] args) {
            ApplicationContext ac = new ClassPathXmlApplicationContext("sample02/applicationContext.xml");

            Address myaddr01 = ac.getBean("myaddr01", Address.class);
            System.out.println(myaddr01);

            Address myaddr02 = ac.getBean("myaddr02", Address.class);
            System.out.println(myaddr02); // 홍길동, 서울, 02-000

            Address myaddr03 = ac.getBean("myaddr03", Address.class);
            System.out.println(myaddr03);

            ListAddress li = ac.getBean("mylist01", ListAddress.class);
            System.out.println(li.getAddr());

            ListAddress li02 = ac.getBean("mylist02", ListAddress.class);
            System.out.println(li02.getAddr());

            ListAddress li03 = ac.getBean("mylist03", ListAddress.class);
            System.out.println(li03.getAddr());

            ListAddress li04 = ac.getBean("mylist04", ListAddress.class);
            System.out.println(li04.getAddr());
        }
    }
    ~~~

	![image](https://user-images.githubusercontent.com/52989294/87292056-30c23e00-c53b-11ea-897d-c0bf1e517b0e.png)

***

## src/sample03

- UserService.java

    ~~~ java
    package sample03;

    public interface UserService {
        public void addUser(UserVo vo);
    }
    ~~~

- UserServiceImpl.java

    ~~~ java
    package sample03;

    public class UserServiceImpl implements UserService {

        public UserServiceImpl() {
            super();
            System.out.println("UserService 생성자 호출");
        }

        @Override
        public void addUser(UserVo vo) {
            System.out.println("UserService : addUser() 메소드 호출");
            System.out.println("이름 : " + vo.getUserName());
        }
    }
    ~~~

- UserVo.java

    ~~~ java
    package sample03;

    import java.util.Date;
    import java.util.Properties;

    public class UserVo {
        private String userName;
        private Properties per;
        private Date my_date = new Date();

        public UserVo() {
            super();
        }

        public UserVo(String userName) {
            super();
            this.userName = userName;
        }

        public String getUserName() {
            return userName;
        }

        public Properties getPer() {
            return per;
        }

        public void setPer(Properties per) {
            this.per = per;
        }

        public Date getMy_date() {
            return my_date;
        }

        public void setMy_date(Date my_date) {
            this.my_date = my_date;
        }

        @Override
        public String toString() {
            return "UserVo [userName=" + userName + ", per=" + per + ", my_date=" + my_date + "]";
        }
    }
    ~~~

- applicationContext.xml

    ~~~ xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

        <bean id="userService" class="sample03.UserServiceImpl" />

        <bean id="mdate" class="java.util.Date">
            <constructor-arg value="2020" />
            <constructor-arg value="12" />
            <constructor-arg value="23" />
        </bean>

        <bean id="mvo" class="sample03.UserVo">
            <property name="my_date" ref="mdate" />
            <property name="per">
                <value>
                    a=1, b=2, c=3
                </value>
            </property>
        </bean>
    </beans>
    ~~~

- MTest.java

    ~~~ java
    package sample03;

    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    import sample02.Address;

    public class MTest {
        public static void main(String[] args) {
            ApplicationContext factory =
                    new ClassPathXmlApplicationContext("sample03/applicationContext.xml");

            UserVo res = (UserVo) factory.getBean("mvo");
            System.out.println(res.getMy_date());
            System.out.println(res.getPer());
        }
    }
    ~~~

	![image](https://user-images.githubusercontent.com/52989294/87292180-65ce9080-c53b-11ea-928d-bb615e34bcb3.png)

***

## src/sample04
- AbstractTest.java

    ~~~ java
    package sample04;

    import java.util.Calendar;
    import java.util.GregorianCalendar;

    public abstract class AbstractTest { // 싱글톤 패턴을 구현
        public abstract String dayInfo(); // 추상 메소드

        public static AbstractTest getInstance() {
            // 싱글톤 : 현재 클래스를 객체를 생성한 다음 static으로 리턴한다.

            GregorianCalendar cal = new GregorianCalendar();
            int day = cal.get(Calendar.DAY_OF_WEEK);
            switch(day) {

            case 1: return new Sunday();
            case 2: return new Monday();
            case 3: return new Tuesday();
            case 4: return new Wednesday();
            case 5: return new Thursday();
            case 6: return new Friday();
            case 7: return new Saturday();
            }
            return null;
        }

        public AbstractTest() {
            super();
        }
    }
    ~~~

- Monday.java ~ Sunday.java(월요일~일요일 양식 똑같음)

    ~~~ java
    package sample04;

    public class Monday extends AbstractTest {

        @Override
        public String dayInfo() {
            return "월요일입니다";
        }
    }
    ~~~

- app.xml

    ~~~ xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

        <bean id="test" class="sample04.AbstractTest"
            factory-method="getInstance" />
    </beans>
    ~~~

- TestApp.java

    ~~~ java
    package sample04;

    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    public class TestApp {

        public static void main(String[] args) {
            ApplicationContext factory = new ClassPathXmlApplicationContext("sample04/app.xml");

            AbstractTest bean = (AbstractTest) factory.getBean("test");

            System.out.println("오늘은 " + bean.dayInfo());

            // beans 객체를 소멸하는 메소드
            ((ClassPathXmlApplicationContext) factory).close();
        }
    }
    ~~~

	![image](https://user-images.githubusercontent.com/52989294/87292753-3ec48e80-c53c-11ea-9841-314b36a86134.png)

***

## src/sample05

- DataVo.java

    ~~~ java
    package sample05;

    public class DateVo {
        private String name;
        private String birth;

        public void setName(String name) {
            this.name = name;
        }

        public void setBirth(String birth) {
            this.birth = birth;
        }

        @Override
        public String toString() {
            return name + "의 생일은 " + birth + " 입니다.";
        }

    }
    ~~~

- data.xml

    ~~~ xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

        <bean id="hong" class="sample05.DateVo">
            <property name="name" value="홍길동" />
            <property name="birth" value="1991-10-21" />
        </bean>

        <bean id="lee" class="sample05.DateVo">
            <property name="name" value="이길동" />
            <property name="birth" value="1992-05-15" />
        </bean>

    </beans>
    ~~~

- Sample5Main.java

    ~~~ java
    package sample05;

    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    public class Sample5Main {
        public static void main(String[] args) {
            ApplicationContext factory = new ClassPathXmlApplicationContext("sample05/data.xml");

            DateVo res = (DateVo) factory.getBean("hong");
            System.out.println(res.toString());

            DateVo res2 = factory.getBean("lee", DateVo.class);
            System.out.println(res2.toString());

            ((ClassPathXmlApplicationContext) factory).close();
        }
    }
    ~~~

	![image](https://user-images.githubusercontent.com/52989294/87292870-6f0c2d00-c53c-11ea-8325-b698d1386098.png)


***

## src/sample06
- Emp.java

    ~~~ java
    package sample06;

    public class Emp {
        private String name;
        private int salary;

        public Emp() {
            super();
        }

        public Emp(String name, int salary) {
            super();
            this.name = name;
            this.salary = salary;
        }

        @Override
        public String toString() {
            return "이름 : " + name + ", 급여 : " + salary;
        }
    }
    ~~~

- Developer.java

    ~~~ java
    package sample06;

    public class Developer extends Emp {
        private String dept;

        public Developer() {
            super();
        }

        public Developer(String name, int salary) {
            super(name, salary);
        }

        public void setDept(String dept) {
            this.dept = dept;
        }

        @Override
        public String toString() {
            return super.toString() + " 부서 : " + dept + "(개발부)";
        }
    }
    ~~~

- Engineer.java

    ~~~ java
    package sample06;

    public class Engineer extends Emp {

        private String dept;

        public Engineer() {
            super();
        }

        public Engineer(String name, int salary) {
            super(name, salary);
        }

        public void setDept(String dept) {
            this.dept = dept;
        }

        @Override
        public String toString() {
            return super.toString() + " 부서 : " + dept + "(기술부)";
        }
    }
    ~~~

- beans.xml

    ~~~ xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

        <bean id="developer" class="sample06.Developer">
            <constructor-arg index ="0" value="강호동" />
            <constructor-arg  index ="1" value="1500000" />
            <property name = "dept" value = "개발1팀"/>
        </bean>

        <bean id="engineer" class="sample06.Engineer">
            <constructor-arg index ="0" value="이순신" />
            <constructor-arg  index ="1" value="2500000" />
            <property name = "dept" value = "기술1팀"/>
        </bean>
    </beans>
    ~~~

- EmpMain.java

    ~~~ java
    package sample06;

    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    public class EmpMain {
        public static void main(String[] args) {
            ApplicationContext factory = new ClassPathXmlApplicationContext("sample06/beans.xml");

            Emp res = (Emp) factory.getBean("developer");
            System.out.println(res.toString());

            Engineer res2 = factory.getBean("engineer", Engineer.class);
            System.out.println(res2.toString());

            ((ClassPathXmlApplicationContext) factory).close();
        }
    }
    ~~~

	![image](https://user-images.githubusercontent.com/52989294/87293003-a11d8f00-c53c-11ea-9bfd-9aa743ee96f0.png)

***

## src/sample07(파일 생성하기)

- Outputter.java(interface)

    ~~~ java
    package sample07;

    import java.io.IOException;

    // 인터페이스, 추상클래스, 선조클래스를
    // 상속 받는 후손 클래스는 메소드 재정의시 선조의 접근제한자와 같거나
    // 영역이 더 넓어야 한다.
    public interface Outputter {
        // public abstract void output(String message) throws IOException;
        void output(String message) throws IOException;
    }
    ~~~

- FileOutput.java

    ~~~ java
    package sample07;

    import java.io.FileWriter;
    import java.io.IOException;

    public class FileOutput implements Outputter {
        private String filePath; // 출력파일에 대한 경로와 파일 이름을 저장할 필드

        private FileOutput() {
            System.out.println("기본 생성자야~~");
        }

        public void setFilePath(String filePath) {
            this.filePath = filePath;
            System.out.println("2. 파일 경로와 파일 이름 설정");
        }

        @Override
        public void output(String message) throws IOException {
            FileWriter out = new FileWriter(filePath);
            out.write(message);
            out.close();
            System.out.println("5.파일 전송 성공");
        }
    }
    ~~~

- MessageBean.java(interface)

    ~~~ java
    package sample07;

    public interface MessageBean {
        public void helloCall();
    }
    ~~~

- MessageBeanImpl.java

    ~~~ java
    package sample07;

    import java.io.IOException;

    public class MessageBeanImpl implements MessageBean {
        private String name;
        private String phone;
        private Outputter outputter; // has ~ a

        // 생성자로 name을 입력받음
        public MessageBeanImpl(String name) {
            super();
            this.name = name;
            System.out.println("1. Bean의 생성자 호출");
        }

        // setter를 통해서 phone과 outputter를 입력받음
        public void setPhone(String phone) {
            this.phone = phone;
            System.out.println("3. phone 입력받음");
        }

        public void setOutputter(Outputter outputter) {
            this.outputter = outputter;
            System.out.println("4. outputter를 입력 받음");
        }

        @Override
        public void helloCall() {
            String message = name + " : " + phone;
            System.out.println(message);
            try {
                outputter.output(message);
                System.out.println("6.작업 끝");
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
    ~~~

- applicationContext.xml

    ~~~ xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

        <!-- xml파일이 여러개일 때 방법1) import하기 -->
        <import resource="app.xml" />
        <bean id="messageBean" class="sample07.MessageBeanImpl">
            <constructor-arg value="이순신" />
            <property name="phone" value="123-4567" />
            <property name="outputter" ref="outputRef" />
        </bean>
    </beans>
    ~~~

- app.xml

    ~~~ xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

        <bean id="outputRef02" class="sample07.FileOutput" />

        <bean id="outputRef" class="sample07.FileOutput">
            <property name="filePath">
                <value>data.txt</value>
            </property>
        </bean>

    </beans>
    ~~~

- HelloSpring.java

    ~~~ java
    package sample07;

    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    public class HelloSpring {
        public static void main(String[] args) {
            ApplicationContext factory
            = new ClassPathXmlApplicationContext("sample07/applicationContext.xml");

            // xml파일이 여러개일 때 방법2) , 로 나열하기
            //ApplicationContext factory
            //= new ClassPathXmlApplicationContext("sample07/app.xml","sample07/applicationContext.xml");

            System.out.println("*** End ***");

            MessageBean bean = (MessageBean) factory.getBean("messageBean");
            bean.helloCall();

            ((ClassPathXmlApplicationContext) factory).close();
        }
    }
    ~~~

	![image](https://user-images.githubusercontent.com/52989294/87295031-8f89b680-c53f-11ea-8644-fb7e3bb7c786.png)

***

## src/sample08

- Emp.java

    ~~~ java
    package sample08;

    public class Emp {
        private String name;
        private int salary;

        public Emp() {
            super();
        }

        public Emp(String name, int salary) {
            super();
            this.name = name;
            this.salary = salary;
        }

        @Override
        public String toString() {
            return "이름 : " + name + " / 급여 : " + salary;
        }
    }
    ~~~

- Developer.java

    ~~~ java
    package sample08;

    public class Developer {
        private Emp emp;
        private String dept;

        public Developer() {
            super();
        }

        public Developer(Emp emp, String dept) {
            this.emp = emp;
            this.dept = dept;
        }

        @Override
        public String toString() {
            return emp.toString() + " / 부서 : " + dept + "(개발부)";
        }
    }
    ~~~

- Engineer.java

    ~~~ java
    package sample08;

    public class Engineer {
        private Emp emp;
        private String dept;

        public Engineer() {
            super();
        }

        public Engineer(Emp emp, String dept) {
            this.emp = emp;
            this.dept = dept;
        }

        @Override
        public String toString() {
            return emp.toString() + " / 부서 : " + dept + "(기술부)";
        }
    }
    ~~~

- beans.xml

    ~~~ xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

        <bean id="developer" class="sample08.Developer">
            <constructor-arg name="emp" ref="emp1" />
            <constructor-arg name="dept" value="개발1팀" />
        </bean>

        <bean id="engineer" class="sample08.Engineer">
            <constructor-arg name="emp" ref="emp2" />
            <constructor-arg name="dept" value="기술1팀" />
        </bean>

        <bean id="emp1" class="sample08.Emp">
            <constructor-arg name="name" value="강호동" />
            <constructor-arg name="salary" value="1500000" />
        </bean>

        <bean id="emp2" class="sample08.Emp">
            <constructor-arg name="name" value="이순신" />
            <constructor-arg name="salary" value="2500000" />
        </bean>
    </beans>
    ~~~

- EmpMain.java

    ~~~ java
    package sample08;

    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    public class EmpMain {
        public static void main(String[] args) {
            ApplicationContext factory = new ClassPathXmlApplicationContext("sample08/beans.xml");

            Developer res = (Developer) factory.getBean("developer");
            System.out.println(res.toString());

            Engineer res2 = (Engineer) factory.getBean("engineer");
            System.out.println(res2.toString());

            ((ClassPathXmlApplicationContext) factory).close();
        }
    }
    ~~~

	![image](https://user-images.githubusercontent.com/52989294/87295307-f4451100-c53f-11ea-981b-1bb7e2225c77.png)

***

## src/sample09

- Emp.java

    ~~~ java
    package sample09;

    public class Emp {
        private String name;
        private int salary;

        public Emp() {
            super();
        }

        public void setName(String name) {
            this.name = name;
        }

        public void setSalary(int salary) {
            this.salary = salary;
        }

        @Override
        public String toString() {
            return "이름 : " + name + " / 급여 : " + salary;
        }
    }
    ~~~

- Developer.java

    ~~~ java
    package sample09;

    public class Developer {
        private Emp emp;
        private String dept;

        public Developer() {
            super();
        }

        public Developer(Emp emp) {
            this.emp = emp;
        }

        public void setDept(String dept) {
            this.dept = dept;
        }

        @Override
        public String toString() {
            return emp.toString() + " / 부서 : " + dept + "(개발부)";
        }
    }
    ~~~

- Engineer.java

    ~~~ java
    package sample09;

    public class Engineer {
        private Emp emp;
        private String dept;

        public Engineer() {
            super();
        }

        public void setEmp(Emp emp) {
            this.emp = emp;
        }

        public void setDept(String dept) {
            this.dept = dept;
        }

        @Override
        public String toString() {
            return emp.toString() + " / 부서 : " + dept + "(기술부)";
        }
    }
    ~~~

- beans.xml

    ~~~ xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

        <!-- 매개인자가 class일 때는 ref로 처리한다. -->
        <bean id="developer" class="sample09.Developer">
            <constructor-arg name="emp" ref="emp1" />
            <property name="dept" value="개발1팀" />
        </bean>
        <bean id="engineer" class="sample09.Engineer">
            <property name="emp" ref="emp2" />
            <property name="dept" value="기술1팀" />
        </bean>
        <bean id="emp1" class="sample09.Emp">
            <property name="name" value="강호동" />
            <property name="salary" value="1500000" />
        </bean>
        <bean id="emp2" class="sample09.Emp">
            <property name="name" value="이순신" />
            <property name="salary" value="2500000" />
        </bean>
    </beans>
    ~~~

- EmpMain.java

    ~~~ java
    package sample09;

    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    public class EmpMain {
        public static void main(String[] args) {
            ApplicationContext factory = new ClassPathXmlApplicationContext("sample09/beans.xml");

            Developer res = (Developer) factory.getBean("developer");
            System.out.println(res.toString());

            Engineer res2 = (Engineer) factory.getBean("engineer");
            System.out.println(res2.toString());

            ((ClassPathXmlApplicationContext) factory).close();
        }
    }
    ~~~

	![image](https://user-images.githubusercontent.com/52989294/87295421-1b9bde00-c540-11ea-8874-eacbfa0563b5.png)

***

## src/sample09

- beans2.xml

    ~~~ xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:p="http://www.springframework.org/schema/p"
        xmlns:c="http://www.springframework.org/schema/c"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

        <bean id="developer" class="sample09.Developer" p:dept="개발부"
            c:emp-ref="emp1" />

        <bean id="engineer" class="sample09.Engineer" p:dept="기술부"
            p:emp-ref="emp2" />

        <bean id="emp1" class="sample09.Emp" p:name="강호동"
            p:salary="1500000" />

        <bean id="emp2" class="sample09.Emp" p:name="이순신"
            p:salary="2500000" />
    </beans>
    ~~~

- EmpMain.java

    ~~~ java
    package sample09;

    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    public class EmpMain2 {
        public static void main(String[] args) {
            ApplicationContext factory = new ClassPathXmlApplicationContext("sample09/beans2.xml");

            Developer res = (Developer) factory.getBean("developer");
            System.out.println(res.toString());

            Engineer res2 = (Engineer) factory.getBean("engineer");
            System.out.println(res2.toString());

            System.out.println("applicationName : " + factory.getApplicationName());
            System.out.println("displayName : " + factory.getDisplayName());
            System.out.println("id : " + factory.getId());

            ((ClassPathXmlApplicationContext) factory).close();
        }
    }
    ~~~

***

## src/sample10

- TV.java

    ~~~ java
    package sample10;

    public interface TV {
        public void powerOn();
        public void powerOff();
        public void volumnDown();
        public void volumnUp();
    }
    ~~~

- LgTV.java

    ~~~ java
    package sample10;

    public class LgTV implements TV{

        @Override
        public void powerOn() {
            System.out.println("LgTV --- 전원 켠다.");
        }

        @Override
        public void powerOff() {
            System.out.println("LgTV --- 전원 끈다.");
        }

        @Override
        public void volumnDown() {
            System.out.println("LgTV --- 소리 낮춘다.");
        }

        @Override
        public void volumnUp() {
            System.out.println("LgTV --- 소리 높인다.");
        }
    }
    ~~~

- SamsungTV.java

    ~~~ java
    package sample10;

    public class SamsungTV implements TV {

        @Override
        public void powerOn() {
            System.out.println("SamsungTV --- 전원 켠다.");
        }

        @Override
        public void powerOff() {
            System.out.println("SamsungTV --- 전원 끈다.");
        }

        @Override
        public void volumnDown() {
            System.out.println("SamsungTV --- 소리 낮춘다.");
        }

        @Override
        public void volumnUp() {
            System.out.println("SamsungTV --- 소리 높인다.");
        }
    }
    ~~~

- BeanFactory.java

    ~~~ java
    package sample10;

    // 자바에서 사용하는 팩토리 빈은 클래스를 만들어서 객체를 생성 후 리턴하는 동적 바인딩구조 
    public class BeanFactory {
        public Object getBean(String beanName) {
            if (beanName.equals("samsung")) {
                return new SamsungTV();
            } else if (beanName.equals("lg")) {
                return new LgTV();
            }
            return null;
        }
    }
    ~~~

- MTest.java

    ~~~ java
    package sample10;

    public class MTest {
        public static void main(String[] args) {
            BeanFactory factory = new BeanFactory();
            TV tv = (TV) factory.getBean("lg");
            tv.powerOn();
            tv.volumnUp();
            tv.volumnDown();
            tv.powerOff();
        }
    }
    ~~~

***

## src/sample11

- TV.java

    ~~~ java
    package sample11;

    public interface TV {
        public void powerOn();
        public void powerOff();
        public void volumnDown();
        public void volumnUp();
    }
    ~~~

- LgTV.java

    ~~~ java
    package sample11;

    public class LgTV implements TV{

        public LgTV() {
            super();
            System.out.println("LG TV 객체가 생성되었어요 ㅎㅎㅎ");
        }

        @Override
        public void powerOn() {
            System.out.println("LgTV --- 전원 켠다.");
        }

        @Override
        public void powerOff() {
            System.out.println("LgTV --- 전원 끈다.");
        }

        @Override
        public void volumnDown() {
            System.out.println("LgTV --- 소리 낮춘다.");
        }

        @Override
        public void volumnUp() {
            System.out.println("LgTV --- 소리 높인다.");
        }
    }
    ~~~


- SamsungTV.java

    ~~~ java
    package sample11;

    public class SamsungTV implements TV {

        public SamsungTV() {
            super();
            System.out.println("Samsung TV 객체가 생성되었어요 ㅎㅎㅎ");
        }

        @Override
        public void powerOn() {
            System.out.println("SamsungTV --- 전원 켠다.");
        }

        @Override
        public void powerOff() {
            System.out.println("SamsungTV --- 전원 끈다.");
        }

        @Override
        public void volumnDown() {
            System.out.println("SamsungTV --- 소리 낮춘다.");
        }

        @Override
        public void volumnUp() {
            System.out.println("SamsungTV --- 소리 높인다.");
        }
    }
    ~~~

- BeanFactory.java

    ~~~ java
    package sample11;

    public class SamsungTV implements TV {

        public SamsungTV() {
            super();
            System.out.println("Samsung TV 객체가 생성되었어요 ㅎㅎㅎ");
        }

        @Override
        public void powerOn() {
            System.out.println("SamsungTV --- 전원 켠다.");
        }

        @Override
        public void powerOff() {
            System.out.println("SamsungTV --- 전원 끈다.");
        }

        @Override
        public void volumnDown() {
            System.out.println("SamsungTV --- 소리 낮춘다.");
        }

        @Override
        public void volumnUp() {
            System.out.println("SamsungTV --- 소리 높인다.");
        }
    }
    ~~~

- applicationContext.xml

    ~~~ xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

        <bean id="samsung" class="sample11.SamsungTV" lazy-init="true" />
        <!-- <bean id="samsung" class="sample11.SamsungTV"/>랑 비교해서 실행  -->
        <bean id="lg" class="sample11.LgTV" lazy-init="true" />
    </beans>
    ~~~


- MTest.java

    ~~~ java
    package sample11;

    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    public class MTest {
        public static void main(String[] args) {

            ApplicationContext factory = new ClassPathXmlApplicationContext
                    ("sample11/applicationContext.xml");
            System.out.println("Spring IOC 컨테이너 초기화 후...");

            TV tv = (TV) factory.getBean("samsung");
            // TV tv = (TV) factory.getBean("lg");
            tv.powerOn();
            tv.volumnUp();
            tv.volumnDown();
            tv.powerOff();
        }
    }
    ~~~

	![image](https://user-images.githubusercontent.com/52989294/87411014-08e9dd80-c602-11ea-88e2-881121b9c118.png)


***

## src/sample12

- Bar.java

    ~~~ java
    package sample12;

    public class Bar {
        public Bar() {
            System.out.println("Bar 객체 생성");
        }
        public void pr() {
            System.out.println("Bar 클래스의 pr() 메소드...");
        }
    }
    ~~~

- Foo.java

    ~~~ java
    package sample12;

    import java.util.Date;
    import java.util.List;
    import java.util.Map;
    import java.util.Set;

    public class Foo {
        private Bar bar; // has ~ a

        public Foo() {
            System.out.println("no-args 생성자");
        }

        public Foo(Date d) {
            System.out.println("생성자 -->> " + d);
        }

        public void setBar(Bar bar) {
            this.bar = bar;
            System.out.println("setBar() 메소드 호출");
        }

        public void setDate(Date date) {
            System.out.println("setDate() 메소드 호출 : " + date);
        }

        public void setNumber(int number) {
            System.out.println("setNumber() 메소드 호출 : " + number);
        }

        public void setInfo(List<String> item) {
            System.out.println("setInfo() 메소드 호출");
            for (String res : item) {
                System.out.println(res);
            }
        }

        public void setStudents(String[] item) {
            // []를 가진 값들은 <list> <array>로 값 전달
            System.out.println("setStudents() 메소드 호출");
            for (String name : item) {
                System.out.println("이벤트 응모 : " + name);
            }
        }

        public void setEvent(String[] item) {
            // []를 가진 값들은 <list> <array>로 값 전달
            System.out.println("setEvent() 메서드 호출");
            for (String name : item) {
                System.out.println("이벤트 : " + name);
            }
        }

        public void setTelNumber(Map<String, String> item) {
            System.out.println("setTelNumber() 메소드 호출");
            Set<String> keys = item.keySet();
            for (String key : keys)
                System.out.println(key + "의 전화번호 " + item.get(key));
        }

        public void fooMethod() {
            System.out.println("Foo 클래스의 fooMethod() 메소드...");
            bar.pr();
        }
    }
    ~~~


- applicationContext.xml

    ~~~ xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

        <bean id="barTest" class="sample12.Bar" />
        <bean id="date" class="java.util.Date" />

        <bean id="fooTest" class="sample12.Foo">
            <constructor-arg ref="date" />

            <property name="bar">
                <ref bean="barTest" />
            </property>

            <property name="date">
                <ref bean="date" />
            </property>

            <property name="number">
                <value>25</value>
            </property>

            <!-- setInfo(List<String> item) -->
            <property name="info">
                <list>
                    <value>영어</value>
                    <value>수학</value>
                    <value>국어</value>
                </list>
            </property>

            <!-- setStudents(String[] item) -->
            <property name="students">
                <list>
                    <value>윤희</value>
                    <value>건동</value>
                    <value>은혜</value>
                    <value>지수</value>
                </list>
            </property>

            <!-- setEvent(Set<String>) -->
            <property name="event">
                <set>
                    <value>둘리</value>
                    <value>고길동</value>
                    <value>또치</value>
                    <value>고길동</value>
                </set>
            </property>

            <!-- setTelNumber(Map<String,String>) -->
            <property name="telNumber">
                <map>
                    <entry>
                        <key>
                            <value>1</value>
                        </key>
                        <value>현이</value>
                    </entry>
                    <entry>
                        <key>
                            <value>2</value>
                        </key>
                        <value>종철이</value>
                    </entry>
                    <entry>
                        <key>
                            <value>3</value>
                        </key>
                        <value>수영이</value>
                    </entry>
                    <entry key="4" value="정연이" />
                </map>
            </property>
        </bean>
    </beans>
    ~~~


- FooTestApp.java

    ~~~ java
    package sample12;

    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    public class FooTestApp {
        public static void main(String[] args) {
            ApplicationContext factory
            = new ClassPathXmlApplicationContext("sample12/applicationContext.xml");
            Foo obj = (Foo) factory.getBean("fooTest");
            obj.fooMethod();
        }
    }
    ~~~

***

## src.sample13

- Parent.java

    ~~~ java
    package sample13;

    import java.util.Properties;

    public class Parent {

        private Properties email;

        public Properties getEmail() {
            return email;
        }

        public void setEmail(Properties email) {
            this.email = email;
        }
    }
    ~~~

- applicationContext.xml

    ~~~ xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

        <bean id="parent" class="sample13.Parent" abstract="true">
            <property name="email">
                <props>
                    <prop key="admin">admin@a.com</prop>
                    <prop key="admin02">admin02@a.com</prop>
                </props>
            </property>
        </bean>

        <bean id="child" parent="parent">
            <property name="email">
                <props merge="true"> <!-- merge = "false" -->
                    <prop key="admin03">admin03@a.com</prop>
                    <!--<prop key="admin04">admin04@a.com</prop>-->
                </props>
            </property>
        </bean>

        <bean id="child02" parent="child">
            <property name="email">
                <props merge="true"> 
                    <prop key="admin05">admin05@a.com</prop>
                    <!--<prop key="admin06">admin06@a.com</prop>-->
                </props>
            </property>
        </bean>

    </beans>
    ~~~

- MTest.java

    ~~~ java
    package sample13;

    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    public class MTest {
        public static void main(String[] args) {
            ApplicationContext factory
            = new ClassPathXmlApplicationContext("sample13/applicationContext.xml");
            Parent obj = factory.getBean("child02", Parent.class);
            System.out.println(obj.getEmail());
        }
    }
    ~~~

	![image](https://user-images.githubusercontent.com/52989294/87412443-05575600-c604-11ea-93ea-c0ef4b473948.png)

***

## depends-on = "참조되는 객체의 id"
- 호출하기 전에 메모리에 올리겠다(먼저 초기화를 하겠다).
- src/sample02
	- applicationContext2.xml
        ~~~ xml
        <?xml version="1.0" encoding="UTF-8"?>
        <beans xmlns="http://www.springframework.org/schema/beans"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

            <!-- 2. ListAddress의 프로퍼티로 참조 후 객체를 선언 -->
            <bean id="mylist01" class="sample02.ListAddress" 
            depends-on="myaddr01, myaddr02">
                <property name="addr" ref="myaddr01"></property>
            </bean>

            <!-- 1. 단일 클래스인 Address의 객체를 선언 -->
            <bean id="myaddr01" class="sample02.Address" />

            <bean id="myaddr02" class="sample02.Address" />
        </beans>
        ~~~

	- MTest2.java

        ~~~ java
        package sample02;

        import org.springframework.context.ApplicationContext;
        import org.springframework.context.support.ClassPathXmlApplicationContext;

        public class MTest2 {
            public static void main(String[] args) {
                ApplicationContext ac = new ClassPathXmlApplicationContext("sample02/applicationContext2.xml");

                Address myaddr01 = ac.getBean("myaddr01", Address.class);
                System.out.println(myaddr01);

                ListAddress li = ac.getBean("mylist01", ListAddress.class);
                System.out.println(li.getAddr());
            }
        }
        ~~~

***

## src/sample14

- testmessage_en.properties

    ~~~ properties
    member.name = \uc790\ubc14
    member.birthplace = \ubbf8\uad6d
    member.hobby= \uc2a4\ud0a4, \uc218\uc601
    member.age = {0}: \uccad\uc18c\ub144
    title = [\ud68c\uc6d0 \uc815\ubcf4]
    ~~~

- testmessage_ko.properties

    ~~~ properties
    member.name = \uD64D\uAE38\uB3D9
    member.birthplace = \uB300\uD55C\uBBFC\uAD6D
    member.hobby= \uC6B4\uB3D9, \uC57C\uAD6C
    member.age = {0}: \uC5B4\uB978
    title = [\uD50C\uB808\uC774 \uB370\uC774\uD130]
    ~~~

- applicationContext.xml

    ~~~ xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

        <!-- 직접 호출 -->
        <!-- AbstractResourceBasedMessageSource.setBaseName(String) -->
        <bean id="messageSource"
            class="org.springframework.context.support.ResourceBundleMessageSource">
            <property name="basename" value="sample14/testmessage" />
        </bean>

        <!-- 해당 클래스로 호출 -->
        <bean id="member" class="sample14.MemberInfo" />
    </beans>
    ~~~

- MemberInfo.java

    ~~~ java
    package sample14;

    import java.util.Locale;

    import org.springframework.context.MessageSource;
    import org.springframework.context.MessageSourceAware;

    public class MemberInfo implements MessageSourceAware {
        private MessageSource messages;

        @Override
        public void setMessageSource(MessageSource messageSource) {
            System.out.println("컨테이너가 메시지 설정을 수행합니다...");
            messages = messageSource;
        }

        public void display(Locale locale) {
            String name = messages.getMessage("member.name", null, locale);
            String birthplace = messages.getMessage("member.birthplace", null, locale);
            String hobby = messages.getMessage("member.hobby", null, locale);
            String age = messages.getMessage("member.age", new Object[] { "13" }, null, locale);

            System.out.println(name);
            System.out.println(birthplace);
            System.out.println(hobby);
            System.out.println(age);
        }
    }
    ~~~

- MTest.java

    ~~~ java
    package sample14;

    import java.util.Locale;

    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    public class MTest {
        public static void main(String[] args) {
            ApplicationContext factory = new ClassPathXmlApplicationContext("sample14/applicationContext.xml");

            MemberInfo obj = (MemberInfo) factory.getBean("member");

            int num = (int) (Math.random() * 2);
            if (num == 0) {
                String message = factory.getMessage("title", null, "기본메시지", Locale.getDefault());
                String name = factory.getMessage("member.name", null, Locale.getDefault());

                System.out.println(message + " " + name);

                obj.display(Locale.getDefault());
            } else {
                String message = factory.getMessage("title", null, "기본메시지", Locale.ENGLISH);
                String name = factory.getMessage("member.name", null, Locale.ENGLISH);
                System.out.println(message + " " + name);

                obj.display(Locale.ENGLISH);
            }
        }
    }
    ~~~

- 결과(두개 중 랜덤으로 출력)

***

## src/sample15

- Food.java

    ~~~ java
    package sample15;

    public class Food {
        private String foodName;
        private int foodPrice;

        public Food() {
            super();
        }

        public void setFoodName(String foodName) {
            this.foodName = foodName;
        }

        public void setFoodPrice(int foodPrice) {
            this.foodPrice = foodPrice;
        }

        @Override
        public String toString() {
            return " Food [foodName=" + foodName + ", foodPrice=" + foodPrice + "]";
        }
    }
    ~~~

- MyFoodMgr.java

    ~~~ java
    package sample15;

    public class MyFoodMgr {
        private Food favoriteFood;
        private Food unFavoriteFood;

        public MyFoodMgr() {
            super();
        }

        public MyFoodMgr(Food favoriteFood, Food unFavoriteFood) {
            super();
            this.favoriteFood = favoriteFood;
            this.unFavoriteFood = unFavoriteFood;
        }

        public void setFavoriteFood(Food favoriteFood) {
            System.out.println("setFavoriteFood() 호출");
            this.favoriteFood = favoriteFood;
        }

        public void setUnFavoriteFood(Food unFavoriteFood) {
            System.out.println("setUnFavoriteFood() 호출");
            this.unFavoriteFood = unFavoriteFood;
        }

        @Override
        public String toString() {
            return "MyFoodMgr [favoriteFood =" + favoriteFood + ", unFavoriteFood=" + unFavoriteFood + "]";
        }
    }
    ~~~

- applicationContext.xml

    ~~~ xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

        <bean id="favoriteFood" class="sample15.Food">
            <property name="foodName" value="봉골레" />
            <property name="foodPrice" value="10000" />
        </bean>


        <bean id="unFavoriteFood" class="sample15.Food">
            <property name="foodName" value="문어, 오징어" />
            <property name="foodPrice" value="8000" />
        </bean>

        <bean id="myFood" class="sample15.MyFoodMgr" autowire="byName" />
    </beans>
    ~~~

- FoodTest.java

    ~~~ java
    package sample15;

    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    public class FoodTest {
        public static void main(String[] args) {
            ApplicationContext factory
            = new ClassPathXmlApplicationContext("sample15/applicationContext.xml");

            MyFoodMgr obj = factory.getBean("myFood", MyFoodMgr.class);
            System.out.println(obj);
        }
    }
    ~~~

	![image](https://user-images.githubusercontent.com/52989294/87413873-d8a43e00-c605-11ea-8fa2-b8d658637465.png)

***

## src/sample16

- a.sql

    ~~~ sql
    create table springtest(
    name varchar2(20),
    id varchar2(20),
    joindate varchar2(20)
    );

    select * from springtest;
    ~~~

- MemberDTO.java

    ~~~ java
    package sample16;

    public class MemberDTO {
        private String name;
        private String id;
        private String joindate;

        public MemberDTO(String name, String id, String joindate) {
            super();
            this.name = name;
            this.id = id;
            this.joindate = joindate;
        }

        public MemberDTO() {
            super();
            // TODO Auto-generated constructor stub
        }

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public String getId() {
            return id;
        }

        public void setId(String id) {
            this.id = id;
        }

        public String getJoindate() {
            return joindate;
        }

        public void setJoindate(String joindate) {
            this.joindate = joindate;
        }
    }
    ~~~

- applicationContext.xml

    ~~~ xml
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:p="http://www.springframework.org/schema/p"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

        <bean id="ds"
            class="org.springframework.jdbc.datasource.SimpleDriverDataSource">
            <property name="driverClass"
                value="oracle.jdbc.driver.OracleDriver" />
            <property name="url"
                value="jdbc:oracle:thin:@localhost:1521:XE" />
            <property name="username" value="big5" />
            <property name="password" value="admin1234" />
        </bean>

        <bean id="memberDAO" class="sample16.MemberDAO">
            <property name="dataSource" ref="ds"></property>
        </bean>
    </beans>
    ~~~

- MemberDAO.java

    ~~~ java
    <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:p="http://www.springframework.org/schema/p"
        xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

        <bean id="ds"
            class="org.springframework.jdbc.datasource.SimpleDriverDataSource">
            <property name="driverClass"
                value="oracle.jdbc.driver.OracleDriver" />
            <property name="url"
                value="jdbc:oracle:thin:@localhost:1521:XE" />
            <property name="username" value="big5" />
            <property name="password" value="admin1234" />
        </bean>

        <bean id="memberDAO" class="sample16.MemberDAO">
            <property name="dataSource" ref="ds"></property>
        </bean>
    </beans>
    ~~~

- Sample16MTest.java

    ~~~ java
    package sample16;

    import java.sql.SQLException;

    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    public class Sample16MTest {
        public static void main(String[] args) {
            ApplicationContext factory 
            = new ClassPathXmlApplicationContext("sample16/applicationContext.xml");

            MemberDAO memberDAO = factory.getBean("memberDAO", MemberDAO.class);

            MemberDTO m = new MemberDTO("111", "111", "1111");
            try {
                int r = memberDAO.getInsert(m);
                if (r > 0) {
                    System.out.println("입력 성공이야");
                }
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }
    }
    ~~~

***

## src/sample17

- MemberDTO.java

    ~~~ java
    package sample17;

    public class MemberDTO {
        private String name;
        private String id;
        private String joindate;

        public MemberDTO(String name, String id, String joindate) {
            super();
            this.name = name;
            this.id = id;
            this.joindate = joindate;
        }

        public MemberDTO() {
            super();
            // TODO Auto-generated constructor stub
        }

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public String getId() {
            return id;
        }

        public void setId(String id) {
            this.id = id;
        }

        public String getJoindate() {
            return joindate;
        }

        public void setJoindate(String joindate) {
            this.joindate = joindate;
        }
    }
    ~~~

- MemberDAOFactory.java

    ~~~ java
    package sample17;

    import javax.sql.DataSource;

    import org.springframework.context.annotation.Bean;
    import org.springframework.context.annotation.Configuration;
    import org.springframework.jdbc.datasource.SimpleDriverDataSource;

    @Configuration
    public class MemberDAOFactory {
        @Bean
        public DataSource getDataSource() {
            SimpleDriverDataSource dataSource = new SimpleDriverDataSource();
            dataSource.setDriverClass(oracle.jdbc.driver.OracleDriver.class);
            dataSource.setUrl("jdbc:oracle:thin:@localhost:1521:xe");
            dataSource.setUsername("big5");
            dataSource.setPassword("admin1234");

            return dataSource;
        }

        @Bean
        public MemberDAO getMemberDAO() {
            MemberDAO dao = new MemberDAO();
            dao.setDataSource(getDataSource());
            return dao;
        }
    }
    ~~~

- MemberDAO.java

    ~~~ java
    package sample17;

    import java.sql.Connection;
    import java.sql.PreparedStatement;
    import java.sql.ResultSet;
    import java.sql.SQLException;

    import javax.sql.DataSource;

    public class MemberDAO {

        private DataSource dataSource;

        public void setDataSource(DataSource dataSource) {
            this.dataSource = dataSource;
        }

        public int join(MemberDTO memberDTO) throws ClassNotFoundException, SQLException {

            int cnt = 0;
            Connection conn = dataSource.getConnection();
            String sql = "insert into springtest values" + "(?,?,sysdate)";

            PreparedStatement pstm = conn.prepareStatement(sql);
            pstm.setString(1, memberDTO.getName());
            pstm.setString(2, memberDTO.getId());

            cnt = pstm.executeUpdate();
            pstm.close();
            conn.close();
            return cnt;
        }

        public MemberDTO search(String id) throws ClassNotFoundException, SQLException {
            MemberDTO memberDTO = null;
            Connection conn = dataSource.getConnection();
            String sql = "select * from springtest where id = ?";

            PreparedStatement pstmt = conn.prepareStatement(sql);
            pstmt.setString(1, id);
            ResultSet rs = pstmt.executeQuery();
            if (rs.next()) {
                memberDTO = new MemberDTO();
                memberDTO.setId(rs.getString("id"));
                memberDTO.setName(rs.getString("name"));
                memberDTO.setJoindate(rs.getString("joindate"));
            }
            rs.close();
            pstmt.close();
            conn.close();
            return memberDTO;
        }
    }
    ~~~

- MemberMain.java

    ~~~ java
    package sample17;

    import java.sql.SQLException;

    import org.springframework.context.annotation.AnnotationConfigApplicationContext;

    public class MemberMain {
        public static void main(String[] args) throws ClassNotFoundException, SQLException {
            AnnotationConfigApplicationContext context = new AnnotationConfigApplicationContext(MemberDAOFactory.class);

            MemberDAO memberDAO = context.getBean("getMemberDAO", MemberDAO.class);

            MemberDTO memberDTO = new MemberDTO();
            memberDTO.setName("222");
            memberDTO.setId("222");

            int cnt = memberDAO.join(memberDTO);
            System.out.println("입력" + (cnt == 0 ? "실패" : "성공"));
            MemberDTO memberDTO2 = memberDAO.search("222");
            System.out.println("이름 : " + memberDTO2.getName());
            System.out.println("아이디 : " + memberDTO2.getId());
            System.out.println("가입일 : " + memberDTO2.getJoindate());
        }
    }
    ~~~